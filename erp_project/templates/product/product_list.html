{% extends 'base.html' %}

{% load staticfiles %}

{% block search %}

<!-- Topbar Search -->
<form class="d-none d-sm-inline-block form-inline mr-auto ml-md-3 my-2 my-md-0 mw-100 navbar-search" method="POST"
      action="/product_search/">
    {% csrf_token %}
    <div class="input-group">
        <div class="input-group-append">
            <input type="text" class="form-control bg-light border-0 small" placeholder="搜索" aria-label="Search"
                   aria-describedby="basic-addon2" name="keyword" required="required">
            <button class="btn btn-primary" type="submit">
                <i class="fas fa-search fa-sm"></i>
            </button>
        </div>
    </div>
</form>
{% endblock %}

{% block body %}

<div class="bs-example" data-example-id="panel-without-body-with-table">
    <div class="panel panel-default">
        <!-- Default panel contents -->
        <div class="panel-heading" style="font-size: 20px">商品信息列表</div>

        <!-- Table -->
        <table class="table">
            <thead>
            <tr>
                <th>序号</th>
                <th>商品名称</th>
                <th>商品价格</th>
                <th>商品图片</th>
                <th>商品状态</th>
                <th>商品分类</th>
                <th>库存数量</th>
                <th>操作</th>
            </tr>
            </thead>
            <tbody>
            {% for p in product %}
            <tr>
                <th scope="row">{{ p.id }}</th>
                <td>{{ p.name }}</td>
                <td>{{ p.price }}</td>

<!--                <td><a href="/media/{{ p.image }}/" data-target=".bs-example-modal-lg">查看图片</a></td>-->

                <td><div data-toggle="modal" data-target=".bs-example-modal-lg"><img src="media/{{ p.image }}"></div></td>

                    <div class="modal fade bs-example-modal-lg" aria-labelledby="mySmallModalLabel" aria-hidden="true">
                      <div class="modal-dialog modal-sm" role="dialog" aria-hidden="true">
                            <img src="media/{{ p.image }}">
                      </div>
                    </div>
                <td>{{ p.status }}</td>
                <td>{{ p.category }}</td>
                <td>{{ p.storage }}</td>
                <td>
                    <a name="{{ p.id }}" href="{% url 'storage_system:product_detail' p.id %}">查看详情</a>
                    <span>|</span>
                    <a name="{{ p.id }}" href="{% url 'storage_system:product_update' p.id %}">更新信息</a>
                    <span>|</span>
                    <a name="{{ p.id }}" href="{% url 'storage_system:product_sold' p.id %}">商品销货</a>
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    {% ifequal count 0 %}
    <h1 style="text-align: center; line-height: 400px">当前没有商品,快去<a href="/create_product">添加</a>吧</h1>
    {% endifequal %}
</div>
{% endblock %}
